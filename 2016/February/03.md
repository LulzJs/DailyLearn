## **Meteor**

###**Query Subdocument**


To make a query over a subdocument in meteor is not posible to use directly the ```$``` or ```$elemMatch``` notation. It is necesary to use the keyword ```fields:``` to do this. To publish just part of a mongo document you should do a query similar to this:

```javascript
Meteor.publish('chapter', function(id, name){
  check(id,String);
  check(name,String);
  return Playlists.find({ _id: id }, { fields: { chapters: { $elemMatch: { name: name }}}});
});
```
That from the original document:
```json
{
  "_id": "cx8cmw5KMjHQm8czw",
  "name": "Test",
  "description": "this is a test",
  "chapters": [
    {
      "name": "First chapter",
      "description": "this is a video about blah blah blah",
      "video": {
        "youtube": "yoAFDy1WS94"
      }
    },
    {
      "name": "Second chapter",
      "description": "this is a video about blah blah blah",
      "video": {
        "youtube": "yoAFDy1WS94"
      }
    }
  ],
  "createdAt": "2016-02-03T07:18:52.371Z",
  "isPublic": false
}
```

Will return:
```json
{
  "_id": "cx8cmw5KMjHQm8czw",
  "chapters": [
    {
      "name": "First chapter",
      "description": "this is a video about blah blah blah",
      "video": {
        "youtube": "ldkfkfkdlfjdkf"
      }
    }
  ]
}

```
This is useful if you have big documents or don't want the complexity of having 2 different collections that need to be related. It will help with the performance and resources that your application uses.